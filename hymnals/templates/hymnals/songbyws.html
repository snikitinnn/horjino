{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}

 <style>
 #verticalRow {
/*     -webkit-transform: rotate(270deg);
     -moz-transform: rotate(270deg);
     -ms-transform: rotate(270deg);
     -o-transform: rotate(270deg);
     transform: rotate(270deg);
     height: 80px;
     width: 20px; */
     text-align: center;
}

table {
     table-layout: fixed; /* Фиксированная ширина ячеек */
     width: 600px; /* Ширина таблицы */
   }
.col1 { width: 160px; }
.coln { width: 15px; }

td {
     font-size: smaller;
     border: solid 1px #f4f4f4;
}
</style>

<h2>{{ chorus.name }}</h2>
<h3>Cтатистика спетых гимнов</h3>
{% if ws_list %}
    <table>
        <col class="col1">
        <col span="20" class="coln">
        <tr>
            <td id="verticalRow"></td>
            {% for ws in ws_list %}
                {% if ws.Supper %}
                    <td id="verticalRow" bgcolor="#FADADD">{{ ws.Date|date:"n" }}</td>
                {% else %}
                    <td id="verticalRow" >{{ ws.Date|date:"n" }}</td>
                {% endif %}
            {% endfor %}
        </tr>
        <tr>
            <td id="verticalRow">Гимн/Дата</td>
            {% for ws in ws_list %}
                {% if ws.Supper %}
                    <td id="verticalRow" bgcolor="#FADADD">{{ ws.Date|date:"j" }}</td>
                {% else %}
                    <td id="verticalRow" >{{ ws.Date|date:"j" }}</td>
                {% endif %}
            {% endfor %}
        </tr>
        {% for song_row in song_table %}
        {% for sws in song_row %}
            {% if forloop.first %}  
                {% if sws.song_count = 0 %}
                    <tr bgcolor="#FAFAD6">
                {% elif sws.song_count >= 3 %}
                    <tr bgcolor="#DCE4EF">
                {% else %}
                    <tr>
                {% endif %}
                    {% if chorus.id < 5 %}
                        <td bgcolor={{sws.hymnal.color}}>{{sws.Name}}</td>
                    {% else %}
                        <td>{{sws.Name}}</td>
                    {% endif %}
            {% else %}
                {% if sws %}
                     {% if sws == 1 %}
                         <td bgcolor="#FADADD"></td>
                     {% else %}
                         <td bgcolor="lightblue"></td>
                     {% endif %}
                {% else %}
                         <td></td>
                {% endif%}
            {% endif%}
        {% endfor %}
                    </tr>
        {% endfor %}
    </table>
{% else %}
    <p>Исполненных гимнов в базе нет.</p>
{% endif %}

    <br>
    <h4><a href="{% url 'hymnals:topic_chorus' chorus.id %}">Тематический указатель</a><br></h4>
    <hr>
    <h4><a href="{% url 'hymnals:alphabet_chorus' chorus.id %}">Алфавитный указатель</a><br></h4>
    <hr>
    <h4><a href="{% url 'hymnals:ws_chorus' chorus.id %}">Cписок богослужений</a></h4>


{% endblock content%}